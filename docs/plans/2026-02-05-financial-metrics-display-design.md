# 財務指標表示機能 設計書

## 概要

銘柄詳細画面にPBR、PER、ROE、キャッシュフローを初心者向け解説付きで表示する。

## 背景

- データは既にDBに保存されている（Stock テーブル）
- 画面に表示されていない状態だった
- 初心者が財務指標を理解しながら学べるようにする

## 表示する指標

| DBカラム | 表示名 | 解説 | 判断基準 |
|----------|--------|------|----------|
| `pbr` | 割安度（PBR） | 会社の資産に対して株価が割安かどうか | 1倍以下なら割安の可能性 |
| `per` | 収益性（PER） | 利益に対して株価が割安かどうか | 15倍以下なら割安傾向 |
| `roe` | 稼ぐ力（ROE） | 会社がお金をどれだけ効率よく増やせるか | 10%以上なら優秀 |
| `operatingCF` | 本業の稼ぎ | 本業でどれだけ現金を稼いでいるか | プラスなら健全 |
| `freeCF` | 自由に使えるお金 | 投資後に残る現金 | プラスなら余裕あり |

## 配置場所

銘柄詳細画面（`/my-stocks/[id]`）にて：

1. ヘッダー（銘柄名、株価、変動率）
2. アクションボタン
3. AI予測セクション
4. **財務指標セクション** ← ここに追加
5. 取引履歴

理由：AI予測の根拠として財務指標を確認できる流れが自然。

## UIデザイン

### レイアウト

- 2列グリッド（モバイルは1列）
- 各指標をカード形式で表示
- セクションタイトル：「財務指標」
- サブタイトル：「この銘柄の健全性をチェック」

### カード構成

```
┌────────────────────┐
│ 割安度（PBR）      │  ← わかりやすい名前（専門用語）
│ 1.2倍             │  ← 数値
│ 1倍以下なら割安    │  ← 判断基準
└────────────────────┘
```

### データがない場合

- 数値：「-」
- 判断基準：「データがありません」

## 実装方針

### 変更対象ファイル

1. `app/my-stocks/[id]/MyStockDetailClient.tsx` - 財務指標セクションを追加
2. `components/FinancialMetrics.tsx` - 新規コンポーネント作成

### データ取得

- Stock テーブルから既存データを取得
- 追加のAPI変更は不要（既に詳細画面でStock情報を取得済み）

### コンポーネント設計

```typescript
// components/FinancialMetrics.tsx
interface FinancialMetricsProps {
  pbr: number | null
  per: number | null
  roe: number | null
  operatingCF: number | null
  freeCF: number | null
}
```

## 対象外

- リスト画面のカードへの表示（情報過多を避けるため）
- 解説の非表示オプション（将来検討）
